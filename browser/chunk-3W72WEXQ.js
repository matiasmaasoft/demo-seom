import{a as k}from"./chunk-X62GSQTF.js";import{a as D}from"./chunk-MODLQZSH.js";import{a as w}from"./chunk-L6KN7YLE.js";import{a as E,b as I}from"./chunk-XM6DSLW7.js";import"./chunk-ZW73QO2R.js";import{$ as y,C as S,I as g,J as p,K as u,L as f,M as b,N as n,O as t,P as h,V as c,Z as v,aa as s,ba as l,ca as _,da as x,ga as C,ja as m,o as d,qa as P,wa as O,z as r}from"./chunk-DHO56EZB.js";var L=e=>["/socio/comprobante",e],F=e=>["/socio/pagar",e],N=(e,o)=>o.mes,z=(e,o)=>o.id;function A(e,o){if(e&1&&(n(0,"div",19)(1,"span",20),s(2),t(),n(3,"div",21),h(4,"div",22),t(),n(5,"span",23),s(6),t()()),e&2){let i=o.$implicit,a=c(2);r(2),l(i.mes),r(2),v("width",i.total/(a.limiteTotal()||1)*100,"%"),r(2),l(a.formatMonto(i.total))}}function R(e,o){if(e&1&&(n(0,"div",13),u(1,A,7,4,"div",19,N),t()),e&2){let i=c();r(),f(i.consumosMensuales())}}function $(e,o){e&1&&(n(0,"p",14),s(1,"Sin consumos este per\xEDodo."),t())}function j(e,o){if(e&1&&(n(0,"li",24)(1,"div",25)(2,"span",26),s(3),t(),n(4,"span",27),s(5),t(),n(6,"span",28),s(7),t()(),n(8,"a",29),s(9,"Ver comprobante"),t()()),e&2){let i=o.$implicit,a=c(2);r(3),l(a.formatFecha(i.fecha)),r(2),l(a.getNombreComercio(i.comercioId)),r(2),l(a.formatMonto(i.monto)),r(),b("routerLink",C(4,L,i.id))}}function B(e,o){if(e&1&&(n(0,"ul",18),u(1,j,10,6,"li",24,z),t()),e&2){let i=c();r(),f(i.consumosList())}}function U(e,o){e&1&&(n(0,"p",14),s(1,"A\xFAn no hay consumos."),t())}function H(e,o){if(e&1&&(n(0,"a",31),s(1,"Pagar con QR"),t()),e&2){let i=c().$implicit;b("routerLink",C(1,F,i.id))}}function Q(e,o){if(e&1&&(n(0,"li",24)(1,"div",25)(2,"span",26),s(3),t(),n(4,"span",27),s(5),t(),n(6,"span",30),s(7),t()(),g(8,H,2,3,"a",31),t()),e&2){let i=o.$implicit,a=c(2);r(3),l(a.formatFecha(i.fecha)),r(2),x("",a.getNombreComercio(i.comercioId)," \u2013 ",a.formatMonto(i.monto)),r(),y("badge-"+i.estado),r(),l(a.estadoLabel(i.estado)),r(),p(i.estado==="aprobada"?8:-1)}}function V(e,o){if(e&1&&(n(0,"ul",18),u(1,Q,9,7,"li",24,z),t()),e&2){let i=c();r(),f(i.solicitudesList())}}function q(e,o){e&1&&(n(0,"p",14),s(1,"Sin solicitudes."),t())}var T=class e{auth=d(w);limite=d(k);consumos=d(E);solicitudes=d(D);comercios=d(I);socioId=m(()=>this.auth.getUsuarioActual()?.id??"");disponible=m(()=>this.limite.disponible(this.socioId()));usado=m(()=>this.limite.usado(this.socioId()));limiteTotal=m(()=>this.limite.limiteTotal(this.socioId()));consumosList=m(()=>this.consumos.listarPorSocio(this.socioId()).slice().reverse());solicitudesList=m(()=>this.solicitudes.listarPorSocio(this.socioId()).slice().reverse());consumosMensuales=m(()=>this.consumos.getConsumosMensualesPorSocio(this.socioId()));getNombreComercio(o){return this.comercios.getById(o)?.nombre??o}formatMonto(o){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(o)}formatFecha(o){return new Date(o).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"})}estadoLabel(o){return{pendiente:"Pendiente",aprobada:"Aprobada",rechazada:"Rechazada",utilizada:"Utilizada"}[o]??o}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=S({type:e,selectors:[["app-dashboard-socio"]],decls:35,vars:10,consts:[[1,"app-container"],[1,"greeting"],[1,"card","card-limit"],[1,"card-limit-header"],[1,"card-title"],["aria-hidden","true",1,"card-limit-refresh"],[1,"card-value","limit-value"],[1,"limit-exp"],[1,"progress-bar"],[1,"progress-fill"],[1,"limit-detail"],[1,"section-charts"],[1,"section-title"],[1,"chart-bars"],[1,"empty-msg"],[1,"actions"],["routerLink","/socio/solicitar",1,"btn-primary","link-btn"],[1,"card"],[1,"list"],[1,"chart-row"],[1,"chart-label"],[1,"chart-bar-wrap"],[1,"chart-bar"],[1,"chart-value"],[1,"list-item"],[1,"list-item-main"],[1,"list-date"],[1,"list-name"],[1,"list-amount"],[1,"list-link",3,"routerLink"],[1,"list-badge"],[1,"list-link","btn-accent-blue",3,"routerLink"]],template:function(i,a){if(i&1&&(n(0,"div",0)(1,"h1",1),s(2),t(),n(3,"section",2)(4,"div",3)(5,"span",4),s(6,"L\xEDmite disponible"),t(),n(7,"span",5),s(8,"\u21BB"),t()(),n(9,"p",6),s(10),t(),n(11,"p",7),s(12),t(),n(13,"div",8),h(14,"div",9),t(),n(15,"p",10),s(16),t()(),n(17,"section",11)(18,"h2",12),s(19,"Consumo mensual"),t(),g(20,R,3,0,"div",13)(21,$,2,0,"p",14),t(),n(22,"div",15)(23,"a",16),s(24,"Solicitar consumo"),t()(),n(25,"section",17)(26,"h2",12),s(27,"Mis \xFAltimas compras"),t(),g(28,B,3,0,"ul",18)(29,U,2,0,"p",14),t(),n(30,"section",17)(31,"h2",12),s(32,"Estado de solicitudes"),t(),g(33,V,3,0,"ul",18)(34,q,2,0,"p",14),t()()),i&2){let M;r(2),_("Hola, ",((M=a.auth.usuarioActual())==null?null:M.nombre)??"Socio"),r(8),l(a.formatMonto(a.disponible())),r(2),_("L\xEDmite total ",a.formatMonto(a.limiteTotal())),r(2),v("width",a.usado()/a.limiteTotal()*100,"%"),r(2),x("",a.formatMonto(a.disponible())," / ",a.formatMonto(a.limiteTotal())),r(4),p(a.consumosMensuales().length>0?20:21),r(8),p(a.consumosList().length>0?28:29),r(5),p(a.solicitudesList().length>0?33:34)}},dependencies:[P,O],styles:['@charset "UTF-8";.greeting[_ngcontent-%COMP%]{font-size:1.375rem;font-weight:700;margin-bottom:var(--seom-spacing-section);color:var(--seom-text);letter-spacing:-.02em}.card-limit[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--seom-primary) 0%,var(--seom-primary-dark) 100%);color:#fff;padding:var(--seom-spacing-card) 1.5rem;margin-bottom:var(--seom-spacing-section);box-shadow:0 4px 16px #c54f0840}.card-limit-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:.5rem}.card-limit[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fffffff2;font-size:.875rem;font-weight:600;letter-spacing:.02em}.card-limit-refresh[_ngcontent-%COMP%]{opacity:.9;font-size:1.25rem;line-height:1;vertical-align:middle}.limit-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0 0 .35rem;letter-spacing:-.03em;line-height:1.15;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.1)}.limit-exp[_ngcontent-%COMP%]{font-size:.8125rem;color:#ffffffd9;margin-bottom:1rem;font-weight:500}.progress-bar[_ngcontent-%COMP%]{height:10px;background:#ffffff40;border-radius:var(--seom-radius-badge);overflow:hidden;margin-bottom:.75rem}.progress-fill[_ngcontent-%COMP%]{height:100%;background:#fff;border-radius:var(--seom-radius-badge);transition:width .3s ease}.limit-detail[_ngcontent-%COMP%]{font-size:.8125rem;color:#ffffffe6;margin:0;font-weight:500}.section-charts[_ngcontent-%COMP%]{margin-bottom:var(--seom-spacing-section)}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin-bottom:1rem;margin-top:0;color:var(--seom-text);letter-spacing:-.01em}.chart-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.chart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:72px 1fr 88px;align-items:center;gap:.75rem}.chart-label[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--seom-text-muted);font-weight:500}.chart-bar-wrap[_ngcontent-%COMP%]{height:26px;background:var(--seom-bg);border-radius:var(--seom-radius-badge);overflow:hidden}.chart-bar[_ngcontent-%COMP%]{height:100%;background:var(--seom-accent-blue);border-radius:var(--seom-radius-badge);min-width:4px;transition:width .3s ease}.chart-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:700;text-align:right;color:var(--seom-text)}.actions[_ngcontent-%COMP%]{margin-bottom:var(--seom-spacing-section);display:flex;justify-content:center;align-items:center}.link-btn[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;text-decoration:none;color:#fff;min-height:48px}.list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.list-item[_ngcontent-%COMP%]{padding:1rem 0;border-bottom:1px solid var(--seom-border);display:flex;flex-direction:column;gap:.75rem}.list-item[_ngcontent-%COMP%]:first-child{padding-top:0}.list-item[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.list-item-main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:.5rem 1rem}.list-date[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--seom-text-muted);font-weight:500;width:100%}.list-name[_ngcontent-%COMP%]{font-weight:600;color:var(--seom-text);flex:1;min-width:0}.list-amount[_ngcontent-%COMP%]{font-weight:700;color:var(--seom-text);font-size:1rem;text-align:right;margin-left:auto}.list-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;padding:.35rem .65rem;border-radius:var(--seom-radius-badge);letter-spacing:.02em;display:inline-block;width:fit-content}.list-badge.badge-pendiente[_ngcontent-%COMP%]{background:var(--seom-warning-bg);color:#7d5a00}.list-badge.badge-aprobada[_ngcontent-%COMP%]{background:#2d6a4f26;color:var(--seom-accent-green)}.list-badge.badge-rechazada[_ngcontent-%COMP%]{background:var(--seom-danger-bg);color:var(--seom-danger)}.list-badge.badge-utilizada[_ngcontent-%COMP%]{background:#0096c71f;color:var(--seom-accent-blue-dark)}.list-link[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--seom-primary);margin-top:.25rem}.list-link.btn-accent-blue[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.6rem 1rem;border-radius:var(--seom-radius-sm);color:#fff;text-decoration:none;width:fit-content;min-height:40px;background:var(--seom-accent-blue-dark);transition:background .2s}.list-link.btn-accent-blue[_ngcontent-%COMP%]:hover{background:var(--seom-accent-blue);text-decoration:none}.empty-msg[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--seom-text-muted);margin:0;padding:.5rem 0}']})};export{T as DashboardSocioComponent};
